<!--
This file is part of the Ristra tangram project.
Please see the license file at the root of this repository, or at:
https://github.com/laristra/tangram/blob/master/LICENSE
-->
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <!-- For Mobile Devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- Font stuff -->
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'/>
    <!-- Font Awesome -->
    <!--    <link rel="stylesheet" href="font-awesome-4.3.0/css/font-awesome.min.css"/> -->
    <script src="https://use.fontawesome.com/3dce4d8e65.js"></script>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta name="generator" content="Doxygen 1.8.13"/>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <title>tangram: Tangram Concepts</title>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="doxy-boot.js"></script>
  </head>
  <body>
    <nav class="navbar navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand">tangram </a>
        </div>
      </div>
    </nav>
    <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
      <div class="content" id="content">
        <div class="container">
          <div class="row">
            <div class="col-sm-12 panel " style="padding-bottom: 15px;">
              <div style="margin-bottom: 15px;">
		<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="namespaceTangram.html">Tangram</a> Concepts </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In some multi-material, multi-physics problems the computational mesh may not exactly follow the material boundaries, which results in some of mesh cells containing several different materials. This situation is typical for problems where the Arbitrary Lagrangian-Eulerian (ALE) method is applied. When exact conservation is critical, interface reconstruction methods are usually the method of choice to compute the material interfaces inside the multi-material cells. These methods take volume fractions of materials in a cell as the input data and partition the cell into non-overlapping single-material regions that completely cover the cell. For every material, the volume of corresponding regions inside the cell matches the volume given by the provided volume fraction to a user-specified tolerance.</p>
<p><a class="el" href="namespaceTangram.html">Tangram</a> is an interface reconstruction framework that provides a uniform interface to implementations of interface reconstruction methods. It features several built-in reconstructors and supports the addition of other reconstructors through the use of wrappers. <a class="el" href="namespaceTangram.html">Tangram</a> supports on-node and distributed parallelism and is therefore suitable for enabling interface reconstruction in high-performance simulations.</p>
<p><a class="el" href="namespaceTangram.html">Tangram</a> is templated on both meshes and reconstructors and interacts with them through the wrappers. The key component of <a class="el" href="namespaceTangram.html">Tangram</a> is the <em>driver</em>, which takes material volume fractions and optionally centroids, and outputs material polytopes that represent the subdivision of a cell. The application only needs to interact with the driver by specifying the mesh and the reconstructor to be used, providing the material data, and receiving reconstruction results. Custom drivers can be written and a standard driver is provided.</p>
<p>Interface reconstruction within <a class="el" href="namespaceTangram.html">Tangram</a> is based on provided material moments: the required data is material volume fractions and, for some methods (e.g. MOF), material centroids. It is assumed that in a single cell materials are not repeated, i.e. for every contained material its moments are given only once. <a class="el" href="namespaceTangram.html">Tangram</a> requires material data to be provided for all mesh cells, including single-material cells.</p>
<p>The results of reconstruction in <a class="el" href="namespaceTangram.html">Tangram</a> are stored in <code>CellMatPoly</code> objects, where a single <code>CellMatPoly</code> contains material polytopes for the corresponding cell. The standard driver performs interface reconstruction for all multi-material cells, but custom drivers may be written to only operate on specific sets of cells or to create <code>CellMatPoly</code> objects even for single material cells. While <code>CellMatPoly</code> stores all the material polytopes in a cell, a specific material polytope can be added or extracted as a <code>MatPoly</code> object.</p>
<p>In the simplest case, the reconstructor uses material volume fractions to create <code>MatPoly</code> objects for every material in a cell, then adds them to the corresponding <code>CellMatPoly</code> object. Note that it is possible for a single material to be represented by several <code>MatPoly</code> objects: this is typical for non-convex cells that are partitioned into simplices on a pre-processing step. The current implementation of <code>CellMatPoly</code> attempts to identify identical nodes and faces of stored material polytopes and to establish connectivity between them. Depending on the interface reconstruction method, the resulting topological data might be incorrect.</p>
<p><a class="el" href="namespaceTangram.html">Tangram</a> works with your underlying mesh through a wrapper that provides an interface to the queries needed to perform interface reconstruction. For an example of the requirements of the wrappers, see the <a class="el" href="example.html">Example Use</a> page. When we refer to <em>mesh</em> in terms of the operations, we really mean <em>mesh wrappers</em>. More details about the requirements of mesh wrappers are given in the documentation of the support package, <a href="https://github.com/laristra/wonton">Wonton</a>.</p>
<h2>MatPoly</h2>
<p>Light-weight data structure for storing material polytopes in boundary-face representation. Provides methods for faceting faces, decomposing star-convex polytopes into simplices, and computing moments that are consistent with Wonton::AuxMeshTopology. Pre-computed moments can also be assigned and stored, in which case they will not be recomputed when queried. Note that faceting procedure involves the following steps:</p>
<ul>
<li>Using the geometric center of the face to partition it into triangles;</li>
<li>Finding the centroid of the resulting union of triangles;</li>
<li>Using that centroid to obtain the final triangulation.</li>
</ul>
<p>Consequently, we require faces have to be star-convex with respect to both the geometric center and the centroid. Similarly, finding the centroid of the polytope involves:</p>
<ul>
<li>Faceting faces that are not simplices;</li>
<li>Finding the centroid of the resulting polytope;</li>
<li>Using that centroid to partition the polytope into simplices.</li>
</ul>
<h2>CellMatPoly</h2>
<p>The current version stores all material polytopes in a cell as a local mesh, and is able to answer topological queries. When a material polytope is added to <code>CellMatPoly</code>, its connectivity is established and the local topology is updated. Note that for material polytopes to be identified as adjacent, their shared faces have to match exactly, i.e. the number and the coordinates of corresponding face vertices should be exactly the same. If provided, <code>CellMatPoly</code> can also store parentage data for local mesh entities, i.e. the indices of entities in the computational mesh which the local mesh entities were derived from.</p>
<h2>Reconstructor</h2>
<p><a class="el" href="namespaceTangram.html">Tangram</a> works with reconstructors through a wrapper. All such wrappers should expose methods for setting the material moments, for specifying the sets of cells for which <code>CellMatPoly</code> objects are to be generated, and the operator to perform interface reconstruction and create the corresponding <code>CellMatPoly</code> objects. <a class="el" href="namespaceTangram.html">Tangram</a> provides several built-in reconstructors:</p>
<ul>
<li><a class="el" href="classTangram_1_1SLIC.html" title="Calculates the interface and constructs CellMatPoly for the SLIC algorithm. ">Tangram::SLIC</a> - implements the Simple Linear Interface Calculation algorithm in 2D and 3D [1], recommended for testing only.</li>
<li><a class="el" href="classTangram_1_1VOF.html">Tangram::VOF</a> - implements the Volume-of-Fluid (Youngs') method in 2D and 3D [2,3]; requires <em>only</em> material volume fractions, but is first order accurate and needs material data from the neighboring cells.</li>
<li><a class="el" href="classTangram_1_1MOF.html">Tangram::MOF</a> - implements the Moment-of-Fluid method in 2D and 3D [4,5]; requires material volume fractions <em>and</em> centroids, but is second order accurate. Due to being a completely local method, requires no information about the neighboring cells and is therefore more amenable to parallel implementations.</li>
</ul>
<p>The standard intersection algorithm used in <a class="el" href="namespaceTangram.html">Tangram</a> is implemented in the <a href="https://github.com/devonmpowell/r3d">r3d</a> library, but custom intersectors can also be used by implementing operators for clipping and splitting of polytopes. Standalone reconstructors can also be used by writing a wrapper, which is demonstrated with the wrapper for the XMOF2D library. Note that XMOF2D is originally a serial interface reconstructor, but by wrapping it in <a class="el" href="namespaceTangram.html">Tangram</a> we can use it with on-node and distributed parallelism, thus also enabling its use for distributed multi-material remap in <a href="https://github.com/laristra/portage">Portage</a>. Similar results can be achieved with other serial reconstructors.</p>
<h2>Intersector</h2>
<p>Built-in reconstructors require an implementation of two functors, Split and Clip. The included functors utilize the r3d intersector and are named respectively:</p>
<ul>
<li><a class="el" href="classTangram_1_1SplitR2D.html">Tangram::SplitR2D</a> - for splitting a convex or non-convex polygon with a line.</li>
<li><a class="el" href="classTangram_1_1SplitR3D.html">Tangram::SplitR3D</a> - for splitting a convex or non-convex polyhedron with a plane.</li>
<li><a class="el" href="classTangram_1_1ClipR2D.html">Tangram::ClipR2D</a> - for computing the moments of the part of a convex or non-convex polygon below a line.</li>
<li><a class="el" href="classTangram_1_1ClipR3D.html">Tangram::ClipR3D</a> - for computing the moments of the part of a convex or non-convex polyhedron below a plane.</li>
</ul>
<p>These functors are template parameters of the built-in reconstructors and can be replaced by custom implementations. Note that Split and Clip functors are generally independent of each other and can be based on different intersectors as long as the respective moments are consistent. In general, the Clip functor is invoked much more often and is more critical for performance. </p><hr/>
<h2>Driver</h2>
<p><a class="el" href="namespaceTangram.html">Tangram</a> comes with a standard <em>driver</em> that is templated on computational mesh, reconstructor and intersection routine, thus allowing high degree of customization. The standard driver performs interface reconstruction on all multi-material cells in batches based on the number of materials in a cell: if shared memory parallelism is utilized, this generally improves the load-balancing.</p>
<p>The driver is used within our application tests in the <code>apps</code> directory. The applications choose a particular mesh and select a specific reconstructor. Users are encouraged to write their own specialized drivers, but the standard driver should serve as a starting point.</p>
<p>Every driver should provide to the reconstructor the material data for all mesh cells on the mesh partition, which is done using the method <code>set_volume_fractions</code> exposed by the reconstructor, and select the subset of cells for which reconstruction is to be performed using the method <code>set_cell_indices_to_operate_on</code>. The latter can be used to limit the cells for which <code>CellMatPoly</code> objects are created or to perform reconstruction in batches when mesh cells are grouped based on certain cretiria (e.g. the number of materials). The <code>set_volume_fractions</code> requires the data on the number of materials in every cell, their material indices, volume fractions, and, optionally, centroids. This data should be provided for all mesh cells, whether owned or ghosts, single or multi-material, in the form of flat vectors of the respective type. The standard driver uses its internal logic to issue batches of cells to the reconstructor and provides a method for the application to setup the material data in the format required by the reconstructor. Custom drivers can be written to expose either less or more of this machinery to their target applications. </p><hr/>
<h2>BFGS</h2>
<p><a class="el" href="namespaceTangram.html">Tangram</a> includes an implementation of the Broyden–Fletcher–Goldfarb–Shanno algorithm as described in <a href="https://www.springer.com/us/book/9780387303031">"Numerical Optimization"</a> by J. Nocedal and S. Wright. This optimization algorithm is used in the implementation of the MOF interface reconstruction method both in 2D and 3D. Note that XMOF2D uses the golden-section search instead. Two additional variants of the BFGS algorithm (MWWP and D-BFGS) are also included and can be used if convergence issues are observed. </p><hr/>
<h2>Utilities</h2>
<p><a class="el" href="namespaceTangram.html">Tangram</a> comes with several support functions that can assist in testing and verification: they can be found in the <code>utilities</code> subdirectory. In particular, <code>get_material_moments</code> can be used to generate material data corresponding to a sequence of planar interfaces, and <code>rpgtools</code> would help with generation of material data for complex material distributions. Material data generation tools use the r3d intersector and provide both the material moments and reference polytopes, which allows for measuring the symmetric difference between the reconstructed and reference material polytopes using the <code>get_mat_sym_diff_vol</code> function.</p>
<p>[1] Noh W.F., Woodward P. "SLIC (Simple Line Interface Calculation)". In: van de Vooren A.I., Zandbergen P.J. (eds) Proceedings of the Fifth International Conference on Numerical Methods in Fluid Dynamics June 28 – July 2, 1976 Twente University, Enschede. Lecture Notes in Physics, vol. 59, pages 330-340, Springer, Berlin, Heidelberg, 1976.</p>
<p>[2] Youngs D.L., "Time-Dependent Multi-Material Flow with Large Fluid Distortion". In Morton K.W. and Baines M.J., (eds) Numerical Methods for Fluid Dynamics, pages 273-285. Academic Press, 1982.</p>
<p>[3] Youngs D.L., "An Interface Tracking Method for a 3D Eulerian Hydrodynamics Code". Technical Report 44/92/35, AWRE, 1984.</p>
<p>[4] Dyadechko V., Shashkov M., "Reconstruction of multi-material interfaces from moment 
  data". Journal of Computational Physics, vol. 227, issue 11, pages 5361-5384, 2008.</p>
<p>[5] Ahn H.T., Shashkov M., "Multi-material interface reconstruction on generalized
  polyhedral meshes". Journal of Computational Physics, vol. 226, issue 2, pages 2096-2132, 2007. </p>
</div></div><!-- contents -->
<!--
This file is part of the Ristra tangram project.
Please see the license file at the root of this repository, or at:
https://github.com/laristra/tangram/blob/master/LICENSE
-->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<!--<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address> -->
<footer id="footer" class="footer">
  <div class="container">
    <div class="row test-muted">
      <div class="footer-row col-md-6">Copyright &copy; 2017
	<a href="http://lanl.gov"> Triad National Security, LLC</a>
	All Rights Reserved.
      </div>
      <div class="footer-row col-md-2">
	<a href="https://github.com/laristra/tangram/blob/master/LICENSE">
	  BSD LICENSE
	</a>
      </div>
      <div class="footer-row col-md-2">
	LA-CC-17-133
      </div>
      <div class="footer-row col-md-1">
	<a href="mailto:portage@lanl.gov">
	  <i class="fa fa-envelope-o fa-2x"></i>
	</a>
      </div>
      <div class="footer-row col-md-1">
	<a href="https://github.com/laristra/tangram">
	  <i class="fa fa-github fa-2x"></i>
	</a>
      </div>
    </div>
  </div>
</footer>
</body>
</html>
